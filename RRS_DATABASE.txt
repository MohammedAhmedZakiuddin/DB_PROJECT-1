-- SORUCE CODE FOR RRS DATABASE

CREATE TABLE TRAIN
(
	TRAIN_NUMBER INT NOT NULL,
	TRAIN_NAME  VARCHAR(30) NOT NULL UNIQUE,
	PREMIUM_FAIR INT NOT NULL,
	GENERAL_FAIR INT NOT NULL,
	SOURCE_STATION VARCHAR(30) NOT NULL,
	DESTINATION_STATION VARCHAR(30) NOT NULL,
	AVAILABLE_DAYS VARCHAR(10) NULL,

	PRIMARY KEY(TRAIN_NUMBER)
);

CREATE TABLE TRAIN_STATUS
(
	TRAIN_DATE TEXT NOT NULL,
	TRAIN_NAME VARCHAR(30) NOT NULL,
	PREMIUM_AVAILABLE INT NOT NULL,
	GENERAL_AVAILABLE INT NOT NULL,
	PREMIUM_OCCUPIED INT NOT NULL,
	GENERAL_OCCUPIED INT NOT NULL,

    FOREIGN KEY (TRAIN_NAME) REFERENCES TRAIN(TRAIN_NAME)

);


CREATE TABLE PASSENGER
(
    FIRST_NAME VARCHAR(40) NOT NULL,
    LAST_NAME VARCHAR(40) NULL,
    ADDRESS TEXT,
    CITY CHAR(40),
    COUNTY CHAR(20),
    PHONE_NUMBER CHAR(10) NOT NULL,
    SSN INT NOT NULL,
    bdate DATE NOT NULL,

    PRIMARY KEY(SSN)

);



CREATE TABLE BOOKED
(
	PASSENGER_SSN INT NOT NULL,
	TRAIN_NUMBER INT NOT NULL,
	TICKET_TYPE VARCHAR(20) NOT NULL,
	Status VARCHAR(10) NULL,

	FOREIGN KEY (PASSENGER_SSN) REFERENCES PASSENGER (SSN),
	FOREIGN KEY (TRAIN_NUMBER) REFERENCES TRAIN(TRAIN_NUMBER)

);